<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="admin_st_mng_remotecomm" xml:lang="en-us">
<title>Updating connectivity settings with the managed-community-configs.xml file</title>
<shortdesc>You can distribute updates to <tm tmtype="reg" trademark="HCL">HCL</tm>
  <tm tmtype="reg" trademark="Sametime">Sametime</tm>  client communities automatically using a
   <filepath>managed-community-configs.xml</filepath> file. The
   <filepath>managed-community-configs.xml</filepath> file is policy-based, so you can control
  communities for different user groups.</shortdesc>
<taskbody>
<context><p>You can also use the <filepath>managed-community-configs.xml</filepath> file
to manage secondary communities, while preventing users from adding
or deleting communities. Set the Allow Multiple Communities policy
to <uicontrol>false</uicontrol> and use the <filepath>managed-community-configs.xml</filepath> to
define the desired secondary communities. The client allows the user
to log into secondary communities defined in the .xml file, but the
user cannot delete secondary communities defined in the file.</p><p>At
login time, the client receives policies and checks for the existence
of a <filepath>managed-community-configs.xml</filepath> file according
to the <uicontrol>Sametime update site URL</uicontrol> policy. For
example, if the administration update site URL is <filepath>http://example.com/updates</filepath>,
the client looks for the file in <filepath>http://example.com/updates/managed-community-configs.xml</filepath>. </p><p>Follow
these steps to create and post a <filepath>managed-community-configs.xml</filepath> file.</p></context>
<steps>
<step><cmd>Create a settings XML file and save it as <filepath>managed-community-configs.xml</filepath>.</cmd>
</step>
<step><cmd>Add settings for communities and actions in the file.</cmd>
</step>
<step>
<cmd>Place the file on a web server, and post the URL (starting with http://) for the file to the
<uicontrol>Sametime update site URL</uicontrol> in the Chat section of the Instant Messaging
policy.</cmd>
</step>
<step><cmd>If you changed the settings file to update the host name
of a community to a new server that is part of the same community,
users' contact lists are still valid with the new host. Set
the ST_COMMUNITY_ID in the <filepath>sametime.ini</filepath> file
of both servers to the same value and ensure that all the communities
in your cluster are using the same community ID. This prevents duplicate
communities from being created on the client when logging into the
new host for the first time.</cmd></step>
</steps>
<result>You can now test the <filepath>managed-community-configs.xml</filepath> file:<ol>
<li>Create a policy set that includes the administration update site
URL and place the .xml file in the location specified by the update
site URL.</li>
<li>Apply the policy to yourself.</li>
<li>Log in to the client to verify the expected changes take effect. </li>
<li>(Optional) Enable logging of the managed community settings to help debug problems. To enable
          logging for the handling of the
          remote <filepath>managed-community-configs.xml</filepath> file, set the following log
          level in your
            client's <filepath><varname>user.home</varname>/HCL/Sametime/.config/rcpinstall.properties </filepath>file: <p><codeblock>com.ibm.collaboration.realtime.community.internal.config.level=FINEST
com.ibm.collaboration.realtime.policy.sametime.level=FINEST</codeblock>where
                <filepath><varname>user.home</varname>/HCL/Sametime</filepath> represents the
            client's workspace location. </p>
        </li>
</ol></result>
</taskbody>

</task>
