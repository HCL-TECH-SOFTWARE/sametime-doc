<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="migrating_upgrading" xml:lang="en-us">
    <title>Migrating from older Sametime versions</title>
    <task id="task_osh_n2m_c5b">
        <title>Planning for migration to Sametime 12</title>
        <taskbody>
            <context>
                <p>Review <xref href="c_migration_planning.dita"/> before continuing.</p>
            </context>
        </taskbody>
    </task>
    <task id="task_fxj_t2m_c5b">
        <title>Converting from native Domino directory to LDAP</title>
        <taskbody>
            <context id="context_j3y_42m_c5b">
                <p>If the older Sametime deployment is not configured for LDAP, the contact lists
                    must be converted using the Stnamechange utility before migrating. The
                    Stnamechange utility is currently unavailable on Sametime 12. Run the utility on
                    Sametime 9, 10, or 11 before migrating.</p>
                <p>Follow the instructions provided in previous Sametime versions to perform the
                    Stnamechange utility.</p>
                <p>
                    <ul id="ul_k3y_42m_c5b">
                        <li><xref
                                href="https://help.hcltechsw.com/sametime/9.0.1/config/changing__names_in_contact_and_privacy_lists.html"
                                format="html" scope="external">Sametime Name Change Utility
                                9.0</xref></li>
                        <li><xref
                                href="https://help.hcltechsw.com/sametime/10.0/config/changing__names_in_contact_and_privacy_lists.html"
                                format="html" scope="external">Sametime Name Change Utility
                                10.0</xref></li>
                        <li><xref
                                href="https://help.hcltechsw.com/sametime/11.6/admin/changing__names_in_contact_and_privacy_lists.html"
                                format="html" scope="external">Sametime Name Change Utility 11.0 |
                                11.5 | 11.6</xref></li>
                    </ul>
                </p>
                <p>The LDAP task is used to convert to LDAP. Run the task on the older Sametime
                    Community server.</p>
            </context>
        </taskbody>
    </task>
    <task id="task_owl_y2m_c5b">
        <title>Migrating contact lists (VPUSERINFO.NSF)</title>
        <taskbody>
            <context id="context_l3y_42m_c5b"><p>In Sametime 9.x, 10.x and 11.x, VPUserinfo.nsf
                    stores all the contact list for users. To migrate your contact list from a
                    previous release to Sametime 12, the contact list data must be migrated to
                    MongoDB. Follow the steps below to migrate your contact list.</p>1. On the
                Sametime server you wish to migrate from, unzip notes-migration.zip to the server's
                program directory from the Sametime_12.0.zip or Sametime_Premium_12.0.zip downloaded
                from HCL Software Portal.<note id="note_m3y_42m_c5b">You must run this command from
                    the Sametime server's program directory where sametime.ini and notes.ini
                    exist.</note><p>2. Run the following commands to setup the environment and run
                    the migration task.</p><ul id="ol_bgs_dfm_c5b">
                    <li>Linux<codeblock id="codeblock_cbg_gfm_c5b">source ./setenv.sh</codeblock><codeblock id="codeblock_nyc_hfm_c5b">./notes-migration.sh</codeblock><note
                            id="note_n3y_42m_c5b">This prompts for locations and options before
                            running the task. Running the notes-migration.zip tool moves your
                            contact list to MongoDB. </note></li>
                    <li>Windows<codeblock id="codeblock_ylm_lfm_c5b">notes-migration.bat</codeblock><note
                            id="note_o3y_42m_c5b">Windows does not require the setup command and
                            prompts for locations and options before running the task.</note></li>
                </ul></context>
        </taskbody>
    </task>
    <task id="task_tgf_pfm_c5b">
        <title>Moving the users</title>
        <taskbody>
            <context>
                <p>Once you are finished testing and are ready to migrate the users, there are a few
                    different strategies to choose from.</p>
                <p>
                    <ul id="ul_p3y_42m_c5b">
                        <li>Using the DNS. The hostname is the same and there is nothing additional
                            to configure on the client side. In this scenario, the DNS would be
                            changed to point to the new environment.<ul id="ul_q3y_42m_c5b">
                                <li>DNS may take some time to propagate throughout your network,
                                    thus you may need to leave both old and new servers running
                                    simultaneously for a period of time. Be certain the
                                    vpuserinfo.nsf has been migrated to the Sametime 12 deployment
                                    to keep the contacts up to date. You can check stlog.nsf or
                                        <i>Community Logins by Date</i> to see how many users are
                                    still on the old server. Restarting the old servers periodically
                                    also forces users onto the new servers as soon as DNS is
                                    updated.</li>
                            </ul></li>
                        <li>Using a load balancer. If your existing environment has a load balancer
                            in front of it, you can simply add the new servers behind the load
                            balancer and shut down the old servers.</li>
                        <li>Pushing a new hostname using
                                <filepath>Managed-Community-Configs.xml</filepath>. You can create
                            the <filepath>managed-community-configs.xml</filepath> file and push it
                            to the users using a Sametime policy. The changes take effect the next
                            time a user restarts their client. It is configured for the new
                            hostname.</li>
                    </ul>
                </p>
            </context>
        </taskbody>
    </task>
    <task id="task_d1r_rfm_c5b">
        <title>Have a back-out plan</title>
        <taskbody>
            <context>
                <p>You must have a back-out plan in case your migration does not succeed. </p>
            </context>
        </taskbody>
    </task>
</task>
