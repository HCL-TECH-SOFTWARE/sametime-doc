<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="enable_dialout_kubernetes" xml:lang="en-us">
    <title>Enabling meeting dial-out on Kubernetes</title>
    <taskbody>
        <steps id="steps_ppx_lvy_mvb">
            <step>
                <cmd>Edit the <filepath>helm/values.yaml</filepath> file and change the
                        <parmname>enableJigasi</parmname> to <userinput>true</userinput>. The
                    default is false.</cmd>
                <info>Add the following settings. Do not include the comments which are in
                    parentheses ().
                    <codeblock id="codeblock_qpx_lvy_mvb">jigasiSipServer:  (This is the SIP server/proxy IP or hostname. For hostname, this must be in DNS or added to CoreDNS config of Kubernetes.)
jigasiSipPort: 5060  (This is the SIP server/proxy port)
jigasiSipTransport: UDP (This is the SIP server/proxy protocol)
jigasiProxyBypass: true  (If the SIP proxy is the only network path to the SIP infrastructure, this must be “false”. If the meeting infrastructure can directly hit the SIP endpoints, such as the SIP gateway to the PSTN, “true” can be set to bypass the proxy after a call is set up.)
ENABLE_INVITE_OTHERS: true</codeblock></info>
            </step>
            <step>
                <cmd>Configure the SIP user account.</cmd>
                <info>
                    <p>The TMG server has a randomly generated passcode that should be shared with
                        the meeting server. This is known as the <term>secret</term>. To share the
                        secret with the meeting server, the value needs to base-64 encoded along
                        with the name. From a command prompt enter the command:
                        <codeblock id="codeblock_rpx_lvy_mvb">echo -n '{"ilink-TMG": "<varname>&lt;secret></varname>"}' | base64</codeblock></p>
                    <p>Substitute the full secret for the <varname>&lt;secret></varname> variable in
                        the command. The resulting value that is echoed to the screen is the
                        credential that needs to be configured on the meeting server.</p>
                    <p>Open the <filepath>/helm/templates/auth-config-secret.yaml</filepath> file in
                        edit mode. Locate the <uicontrol>application-registry.json</uicontrol> and
                        remove the existing <uicontrol>eyB9</uicontrol> value and replace it with
                        the encoded secret.</p>
                </info>
            </step>
            <step>
                <cmd>Run the <codeph>helm list</codeph> command to find out the deployment name and
                    current version. This is needed in the event a roll-back is needed.</cmd>
            </step>
            <step>
                <cmd>To apply the changes, change directories to the helm directory where the
                    Sametime Meeting installer was decompressed, then run the following command: </cmd>
                <info>
                    <codeblock id="codeblock_spx_lvy_mvb">helm upgrade sametime-meetings </codeblock>
                </info>
            </step>
        </steps>
    </taskbody>
</task>
