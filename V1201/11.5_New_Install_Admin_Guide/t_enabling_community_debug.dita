<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="t_enabling_community_debug">
    <title>Enabling Community trace in Kubernetes </title>
    <shortdesc>
        <draft-comment author="debra.taylor">Tagged as not ready</draft-comment>
    </shortdesc>
    <taskbody>
        <context>
            <p>The Sametime Community pod supports a variety of debug parameters as documented in
                    <xref
                    href="https://support.hcltechsw.com/csm?id=kb_article&amp;sysparm_article=KB0079079"
                    format="html" scope="external">Common debug parameters for Sametime Community
                    Server</xref>  article. </p>
            <p><note id="note_hvv_4rw_mvb"/>In Sametime 12, the Community debug is located in the
                    <filepath>sametime.ini</filepath> file is handled by a ConfigMap in Kubernetes.
                The debug parameters from previous releases must be modified if they are configured
                into the ConfigMap.</p>
            <!--<p>For Community debug<ul id="ul_enc_vrw_mvb"><li>Enable Sametime to read the debug ConfigMap</li><li>Modify the ConfigMap for Community debug</li></ul></p>-->
            <p>The changes in this task affect the following pods:<ul id="ul_yqd_j1d_d5b">
                    <li>community</li>
                </ul></p>
        </context>
        <steps id="steps_t2t_srw_mvb">
            <step>
                <cmd>Change directories to where helm is located.;</cmd>
            </step>
            <step>
                <cmd>Open the <filepath>values.yaml</filepath> file for editing.</cmd>
                <info>In the<codeph> global</codeph> section, add the following
                        line:<codeblock id="codeblock_y1k_bsw_mvb">enableCommunityDebug: true</codeblock><note
                        id="note_z1k_bsw_mvb">Confirm the indentation matches the other settings
                        (two spaces).</note></info>
                <info>When finished, save and close the file.</info>
            </step>
            <step>
                <cmd>Apply the changes.</cmd>
                <info>Upgrade the deployment by following the instructions in <xref
                        href="apply_configchanges_docker.dita"/>.</info>
            </step>
            <step>
                <cmd>Run the following command to open the <filepath>ConfigMap</filepath>.</cmd>
                <info>
                    <codeblock id="codeblock_hvq_psw_mvb">kubectl edit cm sametime-community-logging</codeblock>
                </info>
            </step>
            <step>
                <cmd>Press <uicontrol>i</uicontrol> to switch to edit mode. </cmd>
            </step>
            <step>
                <cmd>Configure any custom debug parameters. If you know the parameter, it should be
                    configured with the following format. </cmd>
                <info>
                    <ul id="ol_v1n_zsw_mvb">
                        <li>The first characters are STI__DEBUG. <note id="note_w1n_zsw_mvb">Enter
                                two underscores to separate.</note></li>
                        <li>If your debug parameters belong in the <codeph>[Debug]</codeph> section
                            of the <filepath>sametime.ini</filepath> originally, add two underscores
                            and then your parameter, followed by a colon and its value in quotes.
                            For example, if setting <codeph>VP_LDAP_TRACE=1</codeph> at the [Debug]
                            section of the <filepath>sametime.ini</filepath> file, then the
                            configuration setting would be:
                                <codeblock id="codeblock_x1n_zsw_mvb">STI__DEBUG__VP_LDAP_TRACE: “1”</codeblock><note
                                id="note_y1n_zsw_mvb">In the example, there are two underscores
                                between STI and DEBUG and then two more underscores before the
                                parameter. </note>If your debug setting is a component level debug
                            such as [Debug-StUsers], then the parameter must have the same beginning
                            STI__DEBUG, followed by a single underscore and the component name, and
                            then two underscores and the parameter. For example, if you are setting
                            component level debug for <codeph>VP_TRACE_ALL=1</codeph> for the
                            component [Debug-StUsers], then the configuration setting would be like
                            this:<codeblock id="codeblock_z1n_zsw_mvb">STI__Debug_StUsers__VP_TRACE_ALL: "1"</codeblock></li>
                    </ul>
                </info>
            </step>
            <step>
                <cmd>Save and close the ConfigMap.</cmd>
            </step>
            <step conref="pod_apply_changes.dita#pod_apply_changes/scale_pod">
                <cmd/>
            </step>
        </steps>
    </taskbody>
</task>
