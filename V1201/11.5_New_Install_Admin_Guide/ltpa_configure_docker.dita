<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "task.dtd">
<task id="ltpa_configure_docker" xml:lang="en-us">
    <title>Configuring LTPA in Docker</title>
    <shortdesc>This topic includes the steps to configure LTPA keys on Docker.</shortdesc>
    <taskbody>
        <prereq id="prereq_sfc_t2j_rtb">You must have already created a secret that contains your
            LPTA keys before you can compete this task. For more information on using WebSphere
            Liberty to generate LTPA keys, see <xref href="ltpa_generate_key.dita" scope="local"
                format="dita"/>.<p>If LTPA was not selected during the install process, you must add
                it to the <filepath>sametime.ini</filepath> file to use LTPA authentication. Edit
                the <filepath>sametime.ini</filepath> file and verify that <codeph>Ltpa</codeph> is
                included on the following line. If not, add it before continuing with configuring
                LTPA
                    steps.<codeblock id="codeblock_ybv_dnd_35b">STI_ST_BB_NAMES_ST_AUTH_TOKEN=Fork:Jwt, Ltpa</codeblock><note
                    id="note_u5n_2nd_35b">There are two double underscores after STI and
                    NAMES.</note></p></prereq>
        <steps id="steps_hwr_hfj_rtb">
            <step>
                <cmd>Update the <filepath>.env</filepath> file to reflect the following attributes
                    and  values.</cmd>
                <info>
                    <codeblock id="codeblock_jp3_pgj_k5b">
ENABLE_LTPA=true
LTPA_KEYS_FILE_PATH=<varname>key_file_path</varname>
LTPA_KEYS=/ltpa-config/ltpa.keys
LTPA_KEYS_PASSWORD=<varname>liberty_server_password</varname></codeblock>
                </info>
                <info>The value for <varname>key_file_path</varname> must be the absolute path to
                    the file. For example, if keys are in the <filepath>ltpa.key</filepath> file and
                    in the <filepath> /opt/hcl/sametime</filepath>
                    directory.<codeblock id="codeblock_enl_x15_j5b"> LTPA_KEYS_FILE_PATH=/opt/hcl/sametime/ltpa.keys</codeblock></info>
            </step>
            <step>
                <cmd>Update the <filepath>custom.env</filepath> file to include the following.</cmd>
                <info>
                    <codeblock id="codeblock_kr3_gld_35b">STI_ST_BB_NAMES_ST_AUTH_TOKEN=Fork:Jwt,Ltpa</codeblock>
                </info>
            </step>
            <step>
                <cmd>Update the <filepath>docker-compose.yml</filepath> file to include the
                    following.</cmd>
                <info>
                    <codeblock id="codeblock_lfl_jld_35b">SAMETIME_EXTERNAL_WARINTEGRATION=true</codeblock>
                </info>
            </step>
        </steps>
    </taskbody>
</task>
